<html py:extends="master.xhtml" py:strip="True" xmlns:py="http://www.w3.org/1999/xhtml">
<head py:block="head" py:strip="True">
    <title py:block="master_title">${full_name}</title>
</head>


<body py:block="body" py:strip="True">
<div class="main_content">
    <form id="people_edit" action="/people/$staff_id" method="post">
        <div class="main_title">
            <span>${full_name}</span>
            <span class="navbar-right action">
                <button type="submit">Save</button>
                <a href="/people/$staff_id"><button type="button">Cancel</button></a>
            </span>
        </div>

        <div class="generic_list">
            <table width="100%">
                <tr>
                    <td class="first_column"><label for="team_name">Team: </label></td>
                    <td class="options">
                        <py:for each="t,(t_id,sel,rank) in sorted(team_list.items(), key=lambda x: x[1][2])">
                            <py:switch test="sel is True">
                                <input py:case='1' type="checkbox" id="$t_id" value='$t' name="teams" checked="true"/>
                                <input py:case='0' type="checkbox" id="$t_id" value='$t' name="teams"/>
                            </py:switch>
                            <label for="$t_id">${t}</label><br/>
                        </py:for>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Status: </label></td>
                    <td><input type="text" name="status" id="status"
                               value="${position.status}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Organism: </label></td>
                    <td><input type="text" name="org" id="org"
                               value="${position.org}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Reference: </label></td>
                    <td><input type="text" name="ref" id="ref"
                               value="${position.reference}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Starting date: </label></td>
                    <td><input type="text" name="from" id="from"
                               value="${position.from_date}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Ending date: </label></td>
                    <td><input type="text" name="to" id="to"
                               value="${position.to_date}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Supervisor: </label></td>
                    <td>
                        <select id="supervisor" name="supervisor">
<!--                            <py:if test="supervisor is not None">-->
                                <py:for each="(sid, sname) in supervisor_list">
                                    <py:switch test="sid == supervisor.id">
                                        <option py:case='1' selected="true" value="$sid">${sname}</option>
                                        <option py:case='0' value="$sid">${sname}</option>
                                    </py:switch>
                                </py:for>
<!--                            </py:if>-->
<!--                            <py:if test="supervisor is None">-->
<!--                                <option value='${None}'>&#45;&#45; None &#45;&#45;</option>-->
<!--                                <py:for each="(sid, sname) in supervisor_list">-->
<!--                                    <option value="$sid">${sname}</option>-->
<!--                                </py:for>-->
<!--                            </py:if>-->
                        </select>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Office: </label></td>
                    <td><input type="text" name="office" id="office"
                               value="${office}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Lab: </label></td>
                    <td><input type="text" name="lab" id="lab"
                               value="${lab}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Telephone (office): </label></td>
                    <td><input type="text" name="office_tel" id="office_tel"
                               value="${office_tel}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Telephone (lab): </label></td>
                    <td><input type="text" name="lab_tel" id="lab_tel"
                               value="${lab_tel}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="tel">Telephone (perso): </label></td>
                    <td><input type="text" name="perso_tel" id="perso_tel"
                               value="${perso_tel}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="email">E-mail: </label></td>
                    <td>
                        <input type="text" name="email" id="email" value="${email}" size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="mailing_list">Mailing lists: </label></td>
                    <td><input type="text" name="mailing_list" id="mailing_list"
                               value="${','.join([e.address for e in mailing_lists])}" size="40"/></td>
                </tr>
                <tr>
                    <td class="first_column"><label for="emergency_contact">Emergency contact: </label></td>
                    <td>
                        <input type="text" name="emergency_contact" id="emergency_contact" value="${emergency_contact}"
                               size="40"/>
                    </td>
                </tr>
                <tr>
                    <td class="first_column"><label for="emergency_tel">Emergency telephone: </label></td>
                    <td>
                        <input type="text" name="emergency_tel" id="emergency_tel" value="${emergency_tel}" size="40"/>
                    </td>
                </tr>
            </table>
        </div>
    </form>
</div>
<script>
    const form = document.getElementById('people_edit');
    form.addEventListener('keypress', function(e) {
      if (e.keyCode === 13) {
        e.preventDefault();
      }
    });
</script>
</body>
</html>
